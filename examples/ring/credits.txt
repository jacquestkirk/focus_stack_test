Stolen from https://github.com/cmcguinness/focusstack/tree/master/Input